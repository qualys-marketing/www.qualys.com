{"version":3,"sources":["../../../site/pages/asset/community/coveo.js"],"names":["document","addEventListener","PUBLIC_API_KEY","options","search","searchbox","searchPageURI","site","querySelector","JSON","parse","innerText","err","console","warn","coveo","api","key","Error","Coveo","SearchEndpoint","configureCloudV2Endpoint","event","result","detail","item","totalNumberOfChildResults","raw","jivereplycount","wpcommentcount","numberOfChildResultsShown","childResults","length","coveoFoldingFooter","classList","add","init","location","pathname","match","community","base","url","Omnibox","placeholder","initSearchbox"],"mappings":"aAAA,kBAEAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,CAA8C,UAAY,CA2EzD;AAzEA,GAAIC,CAAAA,CAAJ,CAAoBC,CAApB,CAA6BC,CAA7B,CAAqCC,CAArC,CAAgDC,CAAhD,CAA+DC,CAA/D,CAEAA,CAAI,CAAGP,QAAQ,CAACQ,aAAT,CAAuB,YAAvB,CAJkD,CAKzD,GAAI,CACHD,CAAI,CAAGE,IAAI,CAACC,KAAL,CAAWH,CAAI,CAACI,SAAhB,CACP,CAAC,MAAOC,CAAP,CAAY,CACb,+BADa,CAGb,8BADAC,OAAO,CAACC,IAAR,CAAaF,CAAb,CAFa,CAIbL,CAAI,CAAG,EACP,CAED,GAAIA,CAAI,CAACQ,KAAL,EAAcR,CAAI,CAACQ,KAAL,UAAd,EAAmCR,CAAI,CAACQ,KAAL,WAAkBC,GAAzD,CACCd,CAAc,CAAGK,CAAI,CAACQ,KAAL,WAAkBC,GAAlB,CAAsBC,GADxC,KAGC,MAAM,IAAIC,CAAAA,KAAJ,CAAU,qCAAV,CAAN,CAEDb,CAAS,CAAGL,QAAQ,CAACQ,aAAT,CAAuB,YAAvB,CAnB6C,CAoBzDJ,CAAM,CAAGJ,QAAQ,CAACQ,aAAT,CAAuB,SAAvB,CApBgD,CAsBzDW,KAAK,CAACC,cAAN,CAAqBC,wBAArB,CACC,EADD,CAECnB,CAFD,CAGC,8CAHD,CAIC,CACC,qBAAwB,CACvB,UAAa,iBADU,CADzB,CAJD,CAtByD,CAiCrDE,CAjCqD,EAoCxDA,CAAM,CAACH,gBAAP,CAAwB,oBAAxB,CAwCD,SAA2BqB,CAA3B,CAAkC,IAE7BC,CAAAA,CAAM,CAAGD,CAAK,CAACE,MAAN,CAAaD,MAFO,CAG7BE,CAAI,CAAGH,CAAK,CAACE,MAAN,CAAaC,IAHS,CAI7BC,CAAyB,CAAGH,CAAM,CAACI,GAAP,CAAWC,cAAX,EAA6BL,CAAM,CAACI,GAAP,CAAWE,cAAxC,EAA0D,CAJzD,CAK7BC,CAAyB,CAAGP,CAAM,CAACQ,YAAP,CAAoBC,MALnB,CAQjC,GAAoC,CAAhC,CAFgCN,CAAyB,CAAGI,CAEhE,CAAuC,CAEtC;AACA,GAAIG,CAAAA,CAAkB,CAAGR,CAAI,CAACjB,aAAL,CAAmB,uBAAnB,CAAzB,CACIyB,CAJkC,EAKrCA,CAAkB,CAACC,SAAnB,CAA6BC,GAA7B,CAAiC,QAAjC,CAGD,CAED,CA1DA,CApCwD,CAwCxDhB,KAAK,CAACiB,IAAN,CAAWhC,CAAX,CAAmB,CAClB,mBAAsB,CAACC,CAAD,CADJ,CAAnB,CAxCwD,GA8CxDC,CAAa,CAAG,UA9CwC,CA+CxDH,CAAO,CAAG,CACT,QAAW,CACV,YAAe,QADL,CADF,CA/C8C,CAqDpDkC,QAAQ,CAACC,QAAT,CAAkBC,KAAlB,CAAwB,kBAAxB,CArDoD,GAwDvDjC,CAAa,CAAGC,CAAI,CAACiC,SAAL,CAAeC,IAAf,CAAoBC,GAApB,CAA0B,iBAxDa,CAyDvDvC,CAAO,CAACwC,OAAR,CAAgBC,WAAhB,CAA8B,sBAzDyB,EA6DpDP,QAAQ,CAACC,QAAT,CAAkBC,KAAlB,CAAwB,aAAxB,CA7DoD,GAgEvDjC,CAAa,CAAGC,CAAI,CAACiC,SAAL,CAAeC,IAAf,CAAoBC,GAApB,CAA0B,qBAhEa,CAiEvDvC,CAAO,CAACwC,OAAR,CAAgBC,WAAhB,CAA8B,iBAjEyB,EAsExDzB,KAAK,CAAC0B,aAAN,CAAoBxC,CAApB,CAA+BC,CAA/B,CAA8CH,CAA9C,CAtEwD,CAgGzD,CAhGD,C","sourcesContent":["/* global Coveo */\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tvar PUBLIC_API_KEY, options, search, searchbox, searchPageURI, site;\n\n\tsite = document.querySelector(\"#site_data\");\n\ttry {\n\t\tsite = JSON.parse(site.innerText);\n\t} catch (err) {\n\t\t/* eslint-disable no-console */\n\t\tconsole.warn(err);\n\t\t/* eslint-enable no-console */\n\t\tsite = {};\n\t}\n\n\tif (site.coveo && site.coveo.public && site.coveo.public.api) {\n\t\tPUBLIC_API_KEY = site.coveo.public.api.key;\n\t} else {\n\t\tthrow new Error(\"Public API Key for Coveo not found.\");\n\t}\n\tsearchbox = document.querySelector(\"#searchbox\");\n\tsearch = document.querySelector(\"#search\");\n\n\tCoveo.SearchEndpoint.configureCloudV2Endpoint(\n\t\t\"\",\n\t\tPUBLIC_API_KEY,\n\t\t\"https://platform.cloud.coveo.com/rest/search\",\n\t\t{\n\t\t\t\"queryStringArguments\": {\n\t\t\t\t\"searchHub\": \"CommunitySearch\"\n\t\t\t}\n\t\t}\n\t);\n\n\tif (search) {\n\n\t\t// bind custom event callbacks before initialization\n\t\tsearch.addEventListener(\"newResultDisplayed\", hideShowMoreLink);\n\n\t\t// add an external component to the initialization options\n\t\t// to link the external search box to the search results\n\t\tCoveo.init(search, {\n\t\t\t\"externalComponents\": [searchbox]\n\t\t});\n\n\t} else {\n\n\t\tsearchPageURI = \"/search/\";\n\t\toptions = {\n\t\t\t\"Omnibox\": {\n\t\t\t\t\"placeholder\": \"Search\"\n\t\t\t}\n\t\t};\n\n\t\tif (location.pathname.match(/^\\/documentation/)) {\n\n\t\t\t// searching from a Docs page\n\t\t\tsearchPageURI = site.community.base.url + \"/search/#t=Docs\";\n\t\t\toptions.Omnibox.placeholder = \"Search documentation\";\n\n\t\t}\n\n\t\tif (location.pathname.match(/^\\/training/)) {\n\n\t\t\t// searching from a Training page\n\t\t\tsearchPageURI = site.community.base.url + \"/search/#t=Training\";\n\t\t\toptions.Omnibox.placeholder = \"Search training\";\n\n\t\t}\n\n\t\t// call initSearchBox to setup the standalone search box\n\t\tCoveo.initSearchbox(searchbox, searchPageURI, options);\n\n\t}\n\n\n\t// helper function to hide \"Show more\" links when there are no more results to show\n\tfunction hideShowMoreLink (event) {\n\n\t\tvar result = event.detail.result;\n\t\tvar item = event.detail.item;\n\t\tvar totalNumberOfChildResults = result.raw.jivereplycount || result.raw.wpcommentcount || 0;\n\t\tvar numberOfChildResultsShown = result.childResults.length;\n\t\tvar numberOfChildResultsRemaining = totalNumberOfChildResults - numberOfChildResultsShown;\n\n\t\tif (numberOfChildResultsRemaining < 1) {\n\n\t\t\t// hide Show more link\n\t\t\tvar coveoFoldingFooter = item.querySelector(\".coveo-folding-footer\");\n\t\t\tif (coveoFoldingFooter) {\n\t\t\t\tcoveoFoldingFooter.classList.add(\"hidden\");\n\t\t\t}\n\n\t\t}\n\n\t}\n\n});\n"],"file":"coveo.js"}