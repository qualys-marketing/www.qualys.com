{"version":3,"sources":["../../../site/pages/asset/script/job-title-auto-complete.js"],"names":["window","qualys","$","displayJobTitles","job_titles","css","jQuery","ui","append","attr","getScript","done","autocomplete","source","request","response","getJobTitles","term","reg","trim","length","RegExp","escapeRegex","grep","value","test","loadJobTitles","language","prefix","indexOf","location","hostname","getJSON","data","each","key","val","push","fail","getLanguage","languages","pathname","match","replace","document","ready"],"mappings":"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","sourcesContent":["/* global jQuery */\n\nwindow.qualys = window.qualys || {};\n\n(function(qualys, $) {\n\t\"use strict\";\n\n\tqualys.displayJobTitles = function(job_titles) {\n\t\tvar css;\n\n\t\t// if jQuery UI is not loaded, load it and then run autocomplete\n\t\tif (jQuery.ui === undefined || jQuery.ui === null) {\n\n\t\t\t// load jquery UI CSS theme\n\t\t\t$(\"head\").append(\"<link />\");\n\t\t\tcss = $(\"head link:last\");\n\t\t\tcss.attr({\n\t\t\t\t\"rel\": \"stylesheet\",\n\t\t\t\t\"href\": \"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css\"\n\t\t\t});\n\t\t\t$.getScript(\"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js\")\n\t\t\t\t.done(function() {\n\t\t\t\t\t$(\"#myform_title, #title, #Title\").autocomplete({\n\t\t\t\t\t\tsource: function( request, response ) {\n\t\t\t\t\t\t\tqualys.getJobTitles(request, response, job_titles);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t// otherwise, it's already loaded so just run autocomplete\n\t\t} else {\n\t\t\t$(\"#myform_title, #title, #Title\").autocomplete({\n\t\t\t\tsource: function( request, response ) {\n\t\t\t\t\tqualys.getJobTitles(request, response, job_titles);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tqualys.getJobTitles = function(request, response, job_titles) {\n\t\tvar term, reg;\n\t\tterm = $.trim(request.term);\n\t\t// show autocomplete only when 3 or more non-space characters are typed\n\t\tif (term !== \"\" && term.length > 2) {\n\t\t\treg = new RegExp($.ui.autocomplete.escapeRegex(term), \"i\");\n\t\t\tresponse($.grep(job_titles, function (value) {\n\t\t\t\treturn reg.test(value);\n\t\t\t}));\n\t\t}\n\t};\n\n\tqualys.loadJobTitles = function(language) {\n\t\tvar prefix = \"\";\n\t\tvar hostnames = [\"lps.qualys.com\", \"www.ssllabs.com\", \"dev.ssllabs.com\"];\n\n\t\tif (hostnames.indexOf(window.location.hostname) !== -1) {\n\t\t\tprefix = \"https://www.qualys.com\";\n\t\t}\n\n\t\t$.getJSON(prefix + \"/asset/text/\" + language + \"/job-titles.json\")\n\t\t\t.done(function(data) {\n\t\t\t\tvar job_titles = [];\n\n\t\t\t\t$.each(data, function(key, val) {\n\t\t\t\t\tjob_titles.push(val);\n\t\t\t\t});\n\n\t\t\t\tqualys.displayJobTitles(job_titles);\n\t\t\t})\n\t\t\t.fail(function() { // if error, just load the English job titles\n\t\t\t\tqualys.loadJobTitles(\"en\");\n\t\t\t});\n\t};\n\n\tqualys.getLanguage = function() {\n\t\tvar language, languages;\n\n\t\t// list of languages must match folders in form processor \"messages\" folder\n\t\tlanguages = [\"de\", \"es\", \"fr\", \"ru\"];\n\n\t\t// get the language and then load the language-specific job titles\n\t\t// use this approach after we bake pages based on language\n\t\t//language = $(\"html\").attr(\"lang\");\n\n\t\t// get language from URL (temporary solution while we still have many forms in PHPHTMLib)\n\t\tlanguage = window.location.pathname.match(/\\/\\w{2}\\/$/);\n\n\t\tif (language === undefined || language === null) {\n\t\t\tlanguage = \"en\";\n\t\t} else {\n\t\t\tlanguage = language[0].replace(/^\\/|\\/$/g,\"\");\n\t\t\t// if language in URL is not in list of existing languages, set to English\n\t\t\tif (languages.indexOf(language) === -1) {\n\t\t\t\tlanguage = \"en\";\n\t\t\t}\n\t\t}\n\t\treturn language;\n\t};\n\n\t$(document).ready(function () {\n\t\tqualys.loadJobTitles(qualys.getLanguage());\n\t});\n}(window.qualys, jQuery));"],"file":"job-title-auto-complete.js"}